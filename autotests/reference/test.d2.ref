<Normal Text></Normal Text><br/>
<Comment>"""</Comment><br/>
<Comment>Block comment:</Comment><br/>
<Comment>This file demonstrates:</Comment><br/>
<Comment> - imports (regular and quoted)</Comment><br/>
<Comment> - vars & substitutions</Comment><br/>
<Comment> - containers, nested objects</Comment><br/>
<Comment> - many shapes: cylinder, sql_table, class, c4-person, circle, square, sequence_diagram</Comment><br/>
<Comment> - edges with labels (markdown, LaTeX), different arrow kinds</Comment><br/>
<Comment> - tooltips & links</Comment><br/>
<Comment> - style blocks and globs (wildcards)</Comment><br/>
<Comment> - nulling / suspend / unsuspend</Comment><br/>
<Comment> - scenarios / steps composition</Comment><br/>
<Comment>"""</Comment><br/>
<Normal Text></Normal Text><br/>
<Comment># Imports</Comment><br/>
<Comment># regular import</Comment><br/>
<Import>...@shared</Import><br/>
<Normal Text></Normal Text><br/>
<Comment># quoted import</Comment><br/>
<Import>...@"team.v1"</Import><br/>
<Normal Text></Normal Text><br/>
<Comment># Variables</Comment><br/>
<Keyword>vars</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Operator>{</Operator><br/>
<Normal Text>  </Normal Text><Shape>colors</Shape><Symbol>:</Symbol><Normal Text> </Normal Text><Operator>{</Operator><br/>
<Normal Text>    </Normal Text><Shape>service</Shape><Symbol>:</Symbol><Normal Text> </Normal Text><Symbol>"</Symbol><Color>#0B5FFF</Color><Symbol>"</Symbol><br/>
<Normal Text>    </Normal Text><Shape>db</Shape><Symbol>:</Symbol><Normal Text> </Normal Text><Symbol>"</Symbol><Color>#E6F0FF</Color><Symbol>"</Symbol><br/>
<Normal Text>    </Normal Text><Shape>warn</Shape><Symbol>:</Symbol><Normal Text> </Normal Text><Symbol>"</Symbol><Color>#FFDD99</Color><Symbol>"</Symbol><br/>
<Normal Text>  </Normal Text><Operator>}</Operator><br/>
<Normal Text>  </Normal Text><Shape>urls</Shape><Symbol>:</Symbol><Normal Text> </Normal Text><Operator>{</Operator><br/>
<Normal Text>    </Normal Text><Shape>docs</Shape><Symbol>:</Symbol><Normal Text> </Normal Text><Symbol>"</Symbol><Label>https://example.com/docs#top</Label><Symbol>"</Symbol><br/>
<Normal Text>  </Normal Text><Operator>}</Operator><br/>
<Operator>}</Operator><br/>
<Normal Text></Normal Text><br/>
<Comment># Global style for the root</Comment><br/>
<Keyword>style</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Operator>{</Operator><br/>
<Normal Text>  </Normal Text><Keyword>fill</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Named Color>transparent</Named Color><br/>
<Normal Text>  </Normal Text><Keyword>font</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Value>mono</Value><br/>
<Operator>}</Operator><br/>
<Normal Text></Normal Text><br/>
<Shape>client</Shape><Symbol>:</Symbol><Normal Text> </Normal Text><Operator>{</Operator><br/>
<Normal Text>  </Normal Text><Keyword>shape</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Value>c4-person</Value><br/>
<Normal Text>  </Normal Text><Keyword>label</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Symbol>"</Symbol><Label>Client (browser)</Label><String Char>\n</String Char><Label>modern user agent</Label><Symbol>"</Symbol><br/>
<Normal Text>  </Normal Text><Keyword>tooltip</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Symbol>"</Symbol><Label>Client provides credentials and interacts with the API.</Label><Symbol>"</Symbol><br/>
<Normal Text>  </Normal Text><Keyword>link</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Substitution>${</Substitution><Variable>urls</Variable><Symbol>.</Symbol><Variable>docs</Variable><Substitution>}</Substitution><br/>
<Normal Text>  </Normal Text><Keyword>width</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Integer>90</Integer><br/>
<Normal Text>  </Normal Text><Keyword>height</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Integer>90</Integer><br/>
<Normal Text>  </Normal Text><Keyword>style</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Operator>{</Operator><Keyword>font-size</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Integer>10</Integer><Operator>}</Operator><br/>
<Operator>}</Operator><br/>
<Normal Text></Normal Text><br/>
<Shape>browser_cache</Shape><Symbol>:</Symbol><Normal Text> </Normal Text><Operator>{</Operator><br/>
<Normal Text>  </Normal Text><Keyword>shape</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Value>square</Value><br/>
<Normal Text>  </Normal Text><Keyword>label</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Symbol>"</Symbol><Label>Browser</Label><String Char>\n</String Char><Label>Cache</Label><Symbol>"</Symbol><br/>
<Normal Text>  </Normal Text><Keyword>style</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Operator>{</Operator><Keyword>opacity</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Float>0.9</Float><Operator>}</Operator><br/>
<Operator>}</Operator><br/>
<Normal Text></Normal Text><br/>
<Shape>api_gateway</Shape><Symbol>:</Symbol><Normal Text> </Normal Text><Operator>{</Operator><br/>
<Normal Text>  </Normal Text><Keyword>shape</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Value>rectangle</Value><br/>
<Normal Text>  </Normal Text><Keyword>label</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Symbol>"</Symbol><Label>API Gateway</Label><String Char>\n</String Char><Label>(rate-limits, auth)</Label><Symbol>"</Symbol><br/>
<Normal Text>  </Normal Text><Keyword>style</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Operator>{</Operator><br/>
<Normal Text>    </Normal Text><Keyword>fill</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Substitution>${</Substitution><Variable>colors</Variable><Symbol>.</Symbol><Variable>service</Variable><Substitution>}</Substitution><br/>
<Normal Text>    </Normal Text><Keyword>font-color</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Named Color>white</Named Color><br/>
<Normal Text>  </Normal Text><Operator>}</Operator><br/>
<Operator>}</Operator><br/>
<Normal Text></Normal Text><br/>
<Shape>auth</Shape><Symbol>:</Symbol><Normal Text> </Normal Text><Operator>{</Operator><br/>
<Normal Text>  </Normal Text><Keyword>shape</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Value>circle</Value><br/>
<Normal Text>  </Normal Text><Keyword>label</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Symbol>"</Symbol><Label>Auth</Label><String Char>\n</String Char><Label>(oAuth2 / JWT)</Label><Symbol>"</Symbol><br/>
<Normal Text>  </Normal Text><Keyword>tooltip</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Symbol>"</Symbol><Label>Supports PKCE & refresh tokens</Label><Symbol>"</Symbol><br/>
<Operator>}</Operator><br/>
<Normal Text></Normal Text><br/>
<Shape>workers</Shape><Symbol>:</Symbol><Normal Text> </Normal Text><Operator>{</Operator><br/>
<Normal Text>  </Normal Text><Keyword>shape</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Value>queue</Value><br/>
<Normal Text>  </Normal Text><Keyword>label</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Symbol>"</Symbol><Label>Background</Label><String Char>\n</String Char><Label>workers</Label><Symbol>"</Symbol><br/>
<Normal Text>  </Normal Text><Keyword>style</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Operator>{</Operator><Keyword>shadow</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Boolean>true</Boolean><Operator>}</Operator><br/>
<Operator>}</Operator><br/>
<Normal Text></Normal Text><br/>
<Shape>db_primary</Shape><Symbol>:</Symbol><Normal Text> </Normal Text><Operator>{</Operator><br/>
<Normal Text>  </Normal Text><Keyword>shape</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Value>cylinder</Value><br/>
<Normal Text>  </Normal Text><Keyword>label</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Symbol>"</Symbol><Label>Postgres</Label><String Char>\n</String Char><Label>Primary</Label><Symbol>"</Symbol><br/>
<Normal Text>  </Normal Text><Keyword>tooltip</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Symbol>"</Symbol><Label>primary-db.example.com</Label><String Char>\n</String Char><Label>PG 14</Label><Symbol>"</Symbol><br/>
<Normal Text>  </Normal Text><Keyword>link</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Link target>"https://db.example.com/console"</Link target><br/>
<Normal Text>  </Normal Text><Keyword>style</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Operator>{</Operator><Keyword>fill</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Substitution>${</Substitution><Variable>colors</Variable><Symbol>.</Symbol><Variable>db</Variable><Substitution>}</Substitution><Symbol>;</Symbol><Normal Text> </Normal Text><Keyword>stroke</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Symbol>"</Symbol><Color>#0B4A6F</Color><Symbol>"</Symbol><Operator>}</Operator><br/>
<Operator>}</Operator><br/>
<Normal Text></Normal Text><br/>
<Comment># SQL table</Comment><br/>
<Shape>users</Shape><Symbol>:</Symbol><Normal Text> </Normal Text><Operator>{</Operator><br/>
<Normal Text>  </Normal Text><Keyword>shape</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Value>sql_table</Value><br/>
<Normal Text>  </Normal Text><Shape>id</Shape><Symbol>:</Symbol><Normal Text> </Normal Text><Label>int </Label><Operator>{</Operator><Keyword>constraint</Keyword><Symbol>:</Symbol><Label> </Label><Value>primary_key</Value><Operator>}</Operator><br/>
<Normal Text>  </Normal Text><Shape>name</Shape><Symbol>:</Symbol><Normal Text> </Normal Text><Label>string</Label><br/>
<Normal Text>  </Normal Text><Shape>email</Shape><Symbol>:</Symbol><Normal Text> </Normal Text><Label>string </Label><Operator>{</Operator><Keyword>constraint</Keyword><Symbol>:</Symbol><Label> </Label><Symbol>[</Symbol><Label>"unique"</Label><Symbol>;</Symbol><Label> "not null"</Label><Symbol>]</Symbol><Operator>}</Operator><br/>
<Normal Text>  </Normal Text><Shape>created_at</Shape><Symbol>:</Symbol><Normal Text> </Normal Text><Label>timestamptz</Label><br/>
<Operator>}</Operator><br/>
<Normal Text></Normal Text><br/>
<Comment># UML class</Comment><br/>
<Shape>Order</Shape><Symbol>:</Symbol><Normal Text> </Normal Text><Operator>{</Operator><br/>
<Normal Text>  </Normal Text><Keyword>shape</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Value>class</Value><br/>
<Normal Text>  </Normal Text><Shape>id</Shape><Symbol>:</Symbol><Normal Text> </Normal Text><Label>int</Label><br/>
<Normal Text>  </Normal Text><Shape>total</Shape><Symbol>:</Symbol><Normal Text> </Normal Text><Label>float64</Label><br/>
<Normal Text>  </Normal Text><Shape>placeOrder(customerId</Shape><Normal Text> </Normal Text><Shape>int)</Shape><Symbol>:</Symbol><Normal Text> </Normal Text><Label>bool</Label><br/>
<Normal Text>  </Normal Text><Shape>cancel()</Shape><Symbol>:</Symbol><Normal Text> </Normal Text><Label>bool</Label><br/>
<Operator>}</Operator><br/>
<Normal Text></Normal Text><br/>
<Shape>square_node</Shape><Symbol>:</Symbol><Normal Text> </Normal Text><Operator>{</Operator><Keyword>shape</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Value>square</Value><Symbol>;</Symbol><Normal Text> </Normal Text><Keyword>label</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Symbol>"</Symbol><Label>square</Label><Symbol>"</Symbol><Operator>}</Operator><br/>
<Shape>circle_node</Shape><Symbol>:</Symbol><Normal Text> </Normal Text><Operator>{</Operator><Keyword>shape</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Value>circle</Value><Symbol>;</Symbol><Normal Text> </Normal Text><Keyword>label</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Symbol>"</Symbol><Label>circle</Label><Symbol>"</Symbol><Operator>}</Operator><br/>
<Normal Text></Normal Text><br/>
<Comment># Sequence diagram</Comment><br/>
<Shape>login_sequence</Shape><Symbol>:</Symbol><Normal Text> </Normal Text><Operator>{</Operator><br/>
<Normal Text>  </Normal Text><Keyword>shape</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Value>sequence_diagram</Value><br/>
<Normal Text>  </Normal Text><Comment># actors (explicit ordering matters inside sequence_diagram)</Comment><br/>
<Normal Text>  </Normal Text><Shape>client</Shape><br/>
<Normal Text>  </Normal Text><Shape>api_gateway</Shape><br/>
<Normal Text>  </Normal Text><Shape>auth</Shape><br/>
<Normal Text>  </Normal Text><Comment># messages (order matters)</Comment><br/>
<Normal Text>  </Normal Text><Shape>client</Shape><Normal Text> </Normal Text><Operator>-></Operator><Normal Text> </Normal Text><Shape>api_gateway</Shape><Symbol>:</Symbol><Normal Text> </Normal Text><Symbol>"</Symbol><Label>POST /login</Label><Symbol>"</Symbol><br/>
<Normal Text>  </Normal Text><Shape>api_gateway</Shape><Normal Text> </Normal Text><Operator>-></Operator><Normal Text> </Normal Text><Shape>auth</Shape><Symbol>:</Symbol><Normal Text> </Normal Text><Symbol>"</Symbol><Label>validate(credentials)</Label><Symbol>"</Symbol><br/>
<Normal Text>  </Normal Text><Shape>auth</Shape><Normal Text> </Normal Text><Operator>-></Operator><Normal Text> </Normal Text><Shape>api_gateway</Shape><Symbol>:</Symbol><Normal Text> </Normal Text><Symbol>"</Symbol><Label>200 OK</Label><String Char>\n</String Char><Label>{ token }</Label><Symbol>"</Symbol><br/>
<Normal Text>  </Normal Text><Shape>api_gateway</Shape><Normal Text> </Normal Text><Operator>-></Operator><Normal Text> </Normal Text><Shape>client</Shape><Symbol>:</Symbol><Normal Text> </Normal Text><Symbol>"</Symbol><Label>302 redirect</Label><Symbol>"</Symbol><br/>
<Normal Text>  </Normal Text><Shape>auth</Shape><Normal Text> </Normal Text><Operator>-></Operator><Normal Text> </Normal Text><Shape>auth</Shape><Symbol>:</Symbol><Normal Text> </Normal Text><Symbol>"</Symbol><Label>hash(password)</Label><Symbol>"</Symbol><br/>
<Normal Text>  </Normal Text><Shape>alt</Shape><Symbol>:</Symbol><Normal Text> </Normal Text><Operator>{</Operator><br/>
<Normal Text>    </Normal Text><Symbol>"</Symbol><Shape>invalid creds</Shape><Symbol>":</Symbol><Normal Text> </Normal Text><Operator>{</Operator><br/>
<Normal Text>      </Normal Text><Shape>api_gateway</Shape><Normal Text> </Normal Text><Operator>-></Operator><Normal Text> </Normal Text><Shape>client</Shape><Symbol>:</Symbol><Normal Text> </Normal Text><Symbol>"</Symbol><Label>401 Unauthorized</Label><Symbol>"</Symbol><br/>
<Normal Text>    </Normal Text><Operator>}</Operator><br/>
<Normal Text>    </Normal Text><Symbol>"</Symbol><Shape>valid creds</Shape><Symbol>":</Symbol><Normal Text> </Normal Text><Operator>{</Operator><br/>
<Normal Text>      </Normal Text><Shape>api_gateway</Shape><Normal Text> </Normal Text><Operator>-></Operator><Normal Text> </Normal Text><Shape>client</Shape><Symbol>:</Symbol><Normal Text> </Normal Text><Symbol>"</Symbol><Label>302 redirect</Label><Symbol>"</Symbol><br/>
<Normal Text>    </Normal Text><Operator>}</Operator><br/>
<Normal Text>  </Normal Text><Operator>}</Operator><br/>
<Operator>}</Operator><br/>
<Normal Text></Normal Text><br/>
<Comment># Connections (edges) + labels</Comment><br/>
<Shape>client</Shape><Normal Text> </Normal Text><Operator>-></Operator><Normal Text> </Normal Text><Shape>api_gateway</Shape><Symbol>:</Symbol><Normal Text> </Normal Text><Symbol>"</Symbol><Label>REST: POST /v1/session</Label><Symbol>"</Symbol><br/>
<Shape>client</Shape><Normal Text> </Normal Text><Operator>-></Operator><Normal Text> </Normal Text><Shape>browser_cache</Shape><Symbol>:</Symbol><Normal Text> </Normal Text><Symbol>"</Symbol><Label>Cache read (stale-while-revalidate)</Label><Symbol>"</Symbol><br/>
<Shape>browser_cache</Shape><Normal Text> </Normal Text><Operator><-</Operator><Normal Text> </Normal Text><Shape>api_gateway</Shape><Symbol>:</Symbol><Normal Text> </Normal Text><Symbol>"</Symbol><Label>cache-bust (stale)</Label><Symbol>"</Symbol><br/>
<Shape>api_gateway</Shape><Normal Text> </Normal Text><Operator>-></Operator><Normal Text> </Normal Text><Shape>auth</Shape><Symbol>:</Symbol><Normal Text> </Normal Text><Code>|md</Code><br/>
<Normal Text>  OAuth token exchange</Normal Text><br/>
<Normal Text>  </Normal Text><Fenced Code>```js</Fenced Code><br/>
<Normal Text>  </Normal Text><Function Name>fetch</Function Name><Normal Text>(</Normal Text><String>'/token'</String><Normal Text>)</Normal Text><br/>
<Normal Text>  </Normal Text><Fenced Code>```</Fenced Code><br/>
<Code>|</Code><br/>
<Shape>api_gateway</Shape><Normal Text> </Normal Text><Operator>-></Operator><Normal Text> </Normal Text><Shape>workers</Shape><Symbol>:</Symbol><Normal Text> </Normal Text><Symbol>"</Symbol><Label>enqueue: `processEmail()`</Label><Symbol>"</Symbol><br/>
<Shape>workers</Shape><Normal Text> </Normal Text><Operator>-></Operator><Normal Text> </Normal Text><Shape>db_primary</Shape><Symbol>:</Symbol><Normal Text> </Normal Text><Symbol>"</Symbol><Label>writes (event logs)</Label><Symbol>"</Symbol><br/>
<Shape>api_gateway</Shape><Normal Text> </Normal Text><Operator><-></Operator><Normal Text> </Normal Text><Shape>monitoring</Shape><Symbol>:</Symbol><Normal Text> </Normal Text><Code>|tex</Code><br/>
<Normal Text>  </Normal Text><Macro>\textcolor</Macro><Normal Text>{</Normal Text><Option Text>green</Option Text><Normal Text>}{</Normal Text><Option Text>E</Option Text><Normal Text>}=mc^2</Normal Text><br/>
<Code>|</Code><br/>
<Normal Text></Normal Text><br/>
<Shape>db_primary</Shape><Normal Text> </Normal Text><Operator><-</Operator><Normal Text> </Normal Text><Shape>replica_db</Shape><Symbol>:</Symbol><Normal Text> </Normal Text><Symbol>"</Symbol><Label>replication (async)</Label><Symbol>"</Symbol><br/>
<Shape>worker_queue</Shape><Symbol>:</Symbol><Normal Text> </Normal Text><Operator>{</Operator><br/>
<Normal Text>  </Normal Text><Keyword>shape</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Value>package</Value><br/>
<Normal Text>  </Normal Text><Keyword>label</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Symbol>"</Symbol><Label>worker-queue (internal)</Label><Symbol>"</Symbol><br/>
<Normal Text>  </Normal Text><Keyword>style</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Operator>{</Operator><Keyword>opacity</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Float>0.6</Float><Operator>}</Operator><br/>
<Operator>}</Operator><br/>
<Normal Text></Normal Text><br/>
<Comment># explicit connection with a multi-line block-string label</Comment><br/>
<Shape>api_gateway</Shape><Normal Text> </Normal Text><Operator>-></Operator><Normal Text> </Normal Text><Shape>worker_queue</Shape><Symbol>:</Symbol><Normal Text> </Normal Text><Code>|"""md</Code><br/>
<Normal Text>  Some label:</Normal Text><br/>
<List>    * </List><List: Normal Text>bullet 1</List: Normal Text><br/>
<List>    * </List><List: Normal Text>bullet 2</List: Normal Text><br/>
<List: Normal Text></List: Normal Text><br/>
<Normal Text>  And an inline </Normal Text><Code>`code()`</Code><Normal Text> snippet.</Normal Text><br/>
<Code>"""|</Code><br/>
<Normal Text></Normal Text><br/>
<Shape>monitoring</Shape><Symbol>:</Symbol><Normal Text> </Normal Text><Operator>{</Operator><Keyword>shape</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Value>text</Value><Symbol>;</Symbol><Normal Text> </Normal Text><Keyword>label</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Symbol>"</Symbol><Label>Monitoring</Label><Symbol>"</Symbol><Operator>}</Operator><br/>
<Shape>monitoring</Shape><Symbol>:</Symbol><Normal Text> </Normal Text><Operator>{</Operator><Keyword>tooltip</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Symbol>"</Symbol><Label>OpenTelemetry + Grafana</Label><String Char>\n</String Char><Label>Click to open docs</Label><Symbol>";</Symbol><Normal Text> </Normal Text><Keyword>link</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Substitution>${</Substitution><Variable>urls</Variable><Symbol>.</Symbol><Variable>docs</Variable><Substitution>}</Substitution><Operator>}</Operator><br/>
<Normal Text></Normal Text><br/>
<Operator>*</Operator><Symbol>:</Symbol><Normal Text> </Normal Text><Operator>{!&</Operator><Filter>shape</Filter><Symbol>:</Symbol><Normal Text> </Normal Text><Shape target>sql_table</Shape target><Symbol>;</Symbol><Normal Text> </Normal Text><Keyword>style</Keyword><Symbol>.</Symbol><Keyword>opacity</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Float>0.95</Float><Operator>}</Operator><br/>
<Normal Text></Normal Text><br/>
<Shape>temp_user</Shape><Symbol>:</Symbol><Normal Text> </Normal Text><Operator>{</Operator><br/>
<Normal Text>  </Normal Text><Keyword>shape</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Value>person</Value><br/>
<Normal Text>  </Normal Text><Shape>name</Shape><Symbol>:</Symbol><Normal Text> </Normal Text><Label>John</Label><br/>
<Operator>}</Operator><br/>
<Normal Text></Normal Text><br/>
<Operator>**</Operator><Symbol>:</Symbol><Normal Text> </Normal Text><Value>unsuspend</Value><br/>
<Shape>temp_user</Shape><Symbol>:</Symbol><Normal Text> </Normal Text><Value>suspend</Value><br/>
<Normal Text></Normal Text><br/>
<Comment># names that require quoting (dots, spaces, leading numerals)</Comment><br/>
<Symbol>"</Symbol><Shape>schema.v1.table</Shape><Symbol>":</Symbol><Normal Text> </Normal Text><Operator>{</Operator><Keyword>shape</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Value>page</Value><Symbol>;</Symbol><Normal Text> </Normal Text><Keyword>label</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Symbol>"</Symbol><Label>table with dot in ID</Label><Symbol>"</Symbol><Operator>}</Operator><br/>
<Symbol>"</Symbol><Shape>123-start</Shape><Symbol>":</Symbol><Normal Text> </Normal Text><Operator>{</Operator><Keyword>shape</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Value>diamond</Value><Symbol>;</Symbol><Normal Text> </Normal Text><Keyword>label</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Symbol>"</Symbol><Label>starts-with-number</Label><Symbol>"</Symbol><Operator>}</Operator><br/>
<Symbol>"</Symbol><Shape>complex/name with spaces</Shape><Symbol>":</Symbol><Normal Text> </Normal Text><Operator>{</Operator><Keyword>shape</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Value>hexagon</Value><Symbol>;</Symbol><Normal Text> </Normal Text><Keyword>label</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Symbol>"</Symbol><Label>complex ID</Label><Symbol>"</Symbol><Operator>}</Operator><br/>
<Normal Text></Normal Text><br/>
<Comment># Styles on selectors</Comment><br/>
<Operator>*</Operator><Shape>d</Shape><Operator>*</Operator><Shape>b</Shape><Operator>*</Operator><Symbol>:</Symbol><Normal Text> </Normal Text><Operator>{</Operator><Keyword>style</Keyword><Symbol>.</Symbol><Keyword>font-size</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Integer>12</Integer><Operator>}</Operator><br/>
<Normal Text></Normal Text><br/>
<Comment># Nulling a nested attribute</Comment><br/>
<Shape>users</Shape><Symbol>.</Symbol><Shape>created_at</Shape><Symbol>:</Symbol><Normal Text> </Normal Text><Value>null</Value><br/>
<Normal Text></Normal Text><br/>
<Operator>*</Operator><Symbol>:</Symbol><Normal Text> </Normal Text><Operator>{</Operator><Keyword>style</Keyword><Symbol>.</Symbol><Keyword>font-color</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Symbol>"</Symbol><Color>#222</Color><Symbol>"</Symbol><Operator>}</Operator><br/>
<Normal Text></Normal Text><br/>
<Operator>*</Operator><Symbol>:</Symbol><Normal Text> </Normal Text><Operator>{&</Operator><Filter>link</Filter><Symbol>:</Symbol><Normal Text> </Normal Text><Symbol>*;</Symbol><Normal Text> </Normal Text><Keyword>style</Keyword><Symbol>.</Symbol><Keyword>fill</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Named Color>yellow</Named Color><Symbol>;</Symbol><Normal Text> </Normal Text><Keyword>style</Keyword><Symbol>.</Symbol><Keyword>stroke</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Symbol>"</Symbol><Color>#0A8F0A</Color><Symbol>"</Symbol><Operator>}</Operator><br/>
<Normal Text></Normal Text><br/>
<Operator>*</Operator><Symbol>:</Symbol><Normal Text> </Normal Text><Operator>{</Operator><br/>
<Normal Text>  </Normal Text><Operator>&</Operator><Filter>shape</Filter><Symbol>:</Symbol><Normal Text> </Normal Text><Shape target>c4-person</Shape target><br/>
<Normal Text>  </Normal Text><Keyword>style</Keyword><Symbol>.</Symbol><Keyword>fill</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Substitution>${</Substitution><Variable>colors</Variable><Symbol>.</Symbol><Variable>warn</Variable><Substitution>}</Substitution><br/>
<Operator>}</Operator><br/>
<Normal Text></Normal Text><br/>
<Keyword>scenarios</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Operator>{</Operator><br/>
<Normal Text>  </Normal Text><Shape>degraded</Shape><Symbol>:</Symbol><Normal Text> </Normal Text><Operator>{</Operator><br/>
<Normal Text>    </Normal Text><Shape>db_primary</Shape><Symbol>:</Symbol><Normal Text> </Normal Text><Operator>{</Operator><Keyword>style</Keyword><Symbol>.</Symbol><Keyword>opacity</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Float>0.5</Float><Operator>}</Operator><br/>
<Normal Text>    </Normal Text><Shape>replica_db</Shape><Symbol>:</Symbol><Normal Text> </Normal Text><Operator>{</Operator><Keyword>style</Keyword><Symbol>.</Symbol><Keyword>opacity</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Float>1.0</Float><Symbol>;</Symbol><Normal Text> </Normal Text><Keyword>style</Keyword><Symbol>.</Symbol><Keyword>stroke</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Symbol>"</Symbol><Color>#FF0000</Color><Symbol>"</Symbol><Operator>}</Operator><br/>
<Normal Text>    </Normal Text><Shape>api_gateway</Shape><Normal Text> </Normal Text><Operator>-></Operator><Normal Text> </Normal Text><Shape>replica_db</Shape><Symbol>:</Symbol><Normal Text> </Normal Text><Symbol>"</Symbol><Label>read-only fallback (degraded)</Label><Symbol>"</Symbol><br/>
<Normal Text>    </Normal Text><Shape>legacy_db</Shape><Symbol>:</Symbol><Normal Text> </Normal Text><Value>null</Value><Normal Text> </Normal Text><Comment># overriding with null removes it</Comment><br/>
<Normal Text>  </Normal Text><Operator>}</Operator><br/>
<Operator>}</Operator><br/>
<Normal Text></Normal Text><br/>
<Keyword>steps</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Operator>{</Operator><br/>
<Normal Text>  </Normal Text><Shape>1</Shape><Symbol>:</Symbol><Normal Text> </Normal Text><Operator>{</Operator><br/>
<Normal Text>    </Normal Text><Shape>api_gateway</Shape><Symbol>:</Symbol><Normal Text> </Normal Text><Operator>{</Operator><Keyword>style</Keyword><Symbol>.</Symbol><Keyword>border-radius</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Integer>8</Integer><Operator>}</Operator><br/>
<Normal Text>  </Normal Text><Operator>}</Operator><br/>
<Normal Text>  </Normal Text><Shape>2</Shape><Symbol>:</Symbol><Normal Text> </Normal Text><Operator>{</Operator><br/>
<Normal Text>    </Normal Text><Shape>api_gateway</Shape><Symbol>:</Symbol><Normal Text> </Normal Text><Operator>{</Operator><Keyword>style</Keyword><Symbol>.</Symbol><Keyword>border-radius</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Integer>2</Integer><Symbol>;</Symbol><Normal Text> </Normal Text><Keyword>style</Keyword><Symbol>.</Symbol><Keyword>stroke-dash</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Integer>4</Integer><Operator>}</Operator><br/>
<Normal Text>  </Normal Text><Operator>}</Operator><br/>
<Operator>}</Operator><br/>
<Normal Text></Normal Text><br/>
<Keyword>layers</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Operator>{</Operator><br/>
<Normal Text>  </Normal Text><Shape>extra</Shape><Symbol>:</Symbol><Normal Text> </Normal Text><Operator>{</Operator><br/>
<Normal Text>    </Normal Text><Shape>emoji_node</Shape><Symbol>:</Symbol><Normal Text> </Normal Text><Operator>{</Operator><Keyword>shape</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Value>rectangle</Value><Symbol>;</Symbol><Normal Text> </Normal Text><Keyword>label</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Symbol>"</Symbol><Label>Emoji ðŸš€ â€” æ¸¬è©¦</Label><Symbol>"</Symbol><Operator>}</Operator><br/>
<Normal Text>    </Normal Text><Shape>square_node2</Shape><Symbol>:</Symbol><Normal Text> </Normal Text><Operator>{</Operator><Keyword>shape</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Value>square</Value><Symbol>;</Symbol><Normal Text> </Normal Text><Keyword>width</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Integer>40</Integer><Symbol>;</Symbol><br/>
<Normal Text>                                  </Normal Text><Keyword>height</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Integer>40</Integer><Operator>}</Operator><br/>
<Normal Text>    </Normal Text><Shape>weird_label_node</Shape><Symbol>:</Symbol><Normal Text> </Normal Text><Operator>{</Operator><Keyword>shape</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Value>rectangle</Value><Symbol>;</Symbol><Normal Text> </Normal Text><Keyword>label</Keyword><Symbol>:</Symbol><Normal Text> </Normal Text><Symbol>"</Symbol><Label>This label has a #hash and (paren): check</Label><Symbol>"</Symbol><Operator>}</Operator><br/>
<Normal Text>  </Normal Text><Operator>}</Operator><br/>
<Operator>}</Operator><br/>
